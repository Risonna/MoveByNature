<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  User: rison
  Date: 03.12.2023
  Time: 0:54
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="jakarta.faces.facelets">
<h:head>
    <title>Nature Game Solver</title>
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f0f0;
        }

        .matrix-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .row {
            display: block;
            margin-bottom: 10px;
        }

        .square {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            margin-bottom: 10px;
            align-items: center;
            justify-content: center;
            background-color: #ffffff;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .matrix-input {
            margin-top: 20px;
            display: grid;
            text-align-last: center;
        }

        .text-input {
            width: 40px;
            height: 20px;
            font-size: 14px;
        }

        .command-button {
            background-color: #4caf50;
            color: #fff;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin-top: 10px;
            cursor: pointer;
            border-radius: 4px;
        }

        label {
            margin-right: 10px;
            font-size: 16px;
            font-weight: bold;
            margin-top: 10px;
            color: #333;
        }
        .risk-matrix {
            border-collapse: collapse;
            margin-top: 20px;
        }

        .risk-matrix td {
            width: 30px;
            height: 30px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .risk-element {
            background-color: #f0f0f0; /* or any color you prefer for risk elements */
        }

    </style>
</h:head>
<h:body>
    <h:form id="mainForm">
        <div class="matrix-container">
            <h:outputLabel for="rows">Строки:</h:outputLabel>
            <h:inputText id="rows" value="#{natureGameSolverBean.rows}" styleClass="text-input"/>

            <h:outputLabel for="cols">Столбцы:</h:outputLabel>
            <h:inputText id="cols" value="#{natureGameSolverBean.cols}" styleClass="text-input"/>

            <h:commandButton value="Задать" action="#{natureGameSolverBean.initMatrix}" styleClass="command-button"/>

            <ui:fragment id="matrixSection" rendered="#{natureGameSolverBean.matrixInitialized}">
                <h:outputLabel for="probabilities" style="margin-bottom: 10px">Вероятности состояний природы(в сумме равны 1):</h:outputLabel>
                <div id="probabilities">
                    <ui:repeat value="#{natureGameSolverBean.probabilitiesArray}" var="stateOfNature" varStatus="col">
                        <h:inputText value="#{natureGameSolverBean.probabilitiesArray[col.index]}" styleClass="text-input" style="place-self: center"/>
                    </ui:repeat>

                </div>
                <div class="matrix-input">
                    <ui:repeat var="row" value="#{natureGameSolverBean.matrix}" varStatus="rowLoop">
                        <div class="row">
                            <ui:repeat var="element" value="#{row}" class="square" varStatus="colLoop">
                                <h:inputText value="#{natureGameSolverBean.matrix[rowLoop.index][colLoop.index]}" styleClass="square" />
                            </ui:repeat>
                        </div>
                    </ui:repeat>
                    <h:outputLabel for="gurvicCoeff" style="margin-bottom: 10px">Коэффициент Гурвица(от 0 до 1):</h:outputLabel>
                    <h:inputText id="gurvicCoeff" value="#{natureGameSolverBean.coeffGurvic}" styleClass="text-input" style="place-self: center"/>
                </div>
            </ui:fragment>



            <h:commandButton value="Заполнить матрицу и посчитать критерии" action="#{natureGameSolverBean.analyzeMatrix}" rendered="#{natureGameSolverBean.matrixInitialized}" styleClass="command-button" update="matrixSection resultSection"/>






            <ui:fragment id="resultSection" rendered="#{natureGameSolverBean.resultAvailable}">
                <h:outputText value="Критерий максимакса. Результат:
                стратегия #{1+natureGameSolverBean.rowForMaximax}
                 со значением #{natureGameSolverBean.valueForMaximax}"/>
                <br/>
                <h:outputText value="Критерий Вальда. Результат: стратегия #{1+natureGameSolverBean.rowForMaximin} со значением #{natureGameSolverBean.valueForMaximin}"/>
                <br/>
                <h:outputText value="Критерий Гурвица. Результат: стратегия #{1+natureGameSolverBean.rowForGurvic} со значением #{natureGameSolverBean.valueForGurvic}"/>
                <br/>
                <h:outputText value="Критерий Лапласа. Результат: стратегия #{1+natureGameSolverBean.rowForLaplace} со значением #{natureGameSolverBean.valueForLaplace}"/>
                <br/>
                <h:outputText value="Критерий Байеса. Результат: стратегия #{1+natureGameSolverBean.rowForBayes} со значением #{natureGameSolverBean.valueForBayes}"/>
                <h3>Матрица Рисков</h3>
                <table class="risk-matrix">
                    <ui:repeat var="row" value="#{natureGameSolverBean.riskMatrix}" varStatus="rowLoop">
                        <tr>
                            <ui:repeat var="element" value="#{row}" varStatus="colLoop">
                                <td class="risk-element">#{element}</td>
                            </ui:repeat>
                        </tr>
                    </ui:repeat>
                </table>
                <h:outputText value="Критерий Сэвиджа. Результат: стратегия #{1+natureGameSolverBean.rowForSavage} со значением #{natureGameSolverBean.valueForSavage}"/>
                <br/>
            </ui:fragment>
        </div>
    </h:form>
</h:body>
</html>